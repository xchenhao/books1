(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{756:function(t,s,a){t.exports=a.p+"assets/img/pt-config.1315e209.png"},841:function(t,s,a){"use strict";a.r(s);var n=a(49),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"服务器配置类问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务器配置类问题"}},[t._v("#")]),t._v(" 服务器配置类问题")]),t._v(" "),n("ol",[n("li",[t._v("请分析一个Group By语句的异常原因")]),t._v(" "),n("li",[t._v("如何比较系统运行配置和配置文件中的配置是否一致？")]),t._v(" "),n("li",[t._v("举几个MYSQL中的关建性能参数")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("分析一个 GroupBy 语句的异常原因")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("product_id")]),t._v(" "),n("th",[t._v("category_id")]),t._v(" "),n("th",[t._v("warehouse_id")]),t._v(" "),n("th",[t._v("count")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("2030")]),t._v(" "),n("td",[t._v("9")]),t._v(" "),n("td",[t._v("1")]),t._v(" "),n("td",[t._v("10")])]),t._v(" "),n("tr",[n("td",[t._v("2030")]),t._v(" "),n("td",[t._v("9")]),t._v(" "),n("td",[t._v("2")]),t._v(" "),n("td",[t._v("15")])]),t._v(" "),n("tr",[n("td",[t._v("2030")]),t._v(" "),n("td",[t._v("9")]),t._v(" "),n("td",[t._v("3")]),t._v(" "),n("td",[t._v("20")])]),t._v(" "),n("tr",[n("td",[t._v("2040")]),t._v(" "),n("td",[t._v("8")]),t._v(" "),n("td",[t._v("1")]),t._v(" "),n("td",[t._v("30")])]),t._v(" "),n("tr",[n("td",[t._v("2040")]),t._v(" "),n("td",[t._v("8")]),t._v(" "),n("td",[t._v("2")]),t._v(" "),n("td",[t._v("20")])])])]),t._v(" "),n("div",{staticClass:"language-sql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" product_id，warehouse_id，sum（count）"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" cnt "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" stock "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" product_id；\n")])])]),n("p",[t._v("知识点：SQL_MODE 的作用")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("配置MySQL处理SQL的方式")])]),t._v(" "),n("li",[n("p",[t._v("set [session/global/persist] sql_mode='xxxxxx")])]),t._v(" "),n("li",[n("p",[t._v("[mysqld] sqlmode=xxxxxx")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("SQL_MODE")]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("ONLY_FULL_GROUP_BY")]),t._v(" "),n("td",[t._v("对于GROUP BY聚合操作，如果出现在SELECT中的列、HAVING或者ORDER BY子句的非聚合列，没有在GROUP BY中出现，那么这个SQL语法检查报错。")])]),t._v(" "),n("tr",[n("td",[t._v("ANSI QUOTES")]),t._v(" "),n("td",[t._v("禁止用双引号来引用字符串。")])]),t._v(" "),n("tr",[n("td",[t._v("REAL_AS_FLOAT")]),t._v(" "),n("td",[t._v("Real做为float的同义词")])]),t._v(" "),n("tr",[n("td",[t._v("PIPES_AS_CONCAT")]),t._v(" "),n("td",[t._v("将 || 视为字符串的连接操作符而非或运算符")])]),t._v(" "),n("tr",[n("td",[t._v("STRICT_TRANS_TABLES"),n("br"),t._v("STRICT_ALL_TABLES")]),t._v(" "),n("td",[t._v("在事务存储引擎/所有存储引擎上启用严格模式出现，那么这个SQL语法检查报错。")])]),t._v(" "),n("tr",[n("td",[t._v("ERROR_FOR_DIVISION_BY_ZERO")]),t._v(" "),n("td",[t._v("不允许0做为除数")])]),t._v(" "),n("tr",[n("td",[t._v("NO_AUTO_CREATE_USER")]),t._v(" "),n("td",[t._v("在用户不存在时不允许grant语句自动建立用")])]),t._v(" "),n("tr",[n("td",[t._v("NO_ZERO_IN_DATE"),n("br"),t._v("NO_ZERO_DATE")]),t._v(" "),n("td",[t._v("日期数据内/日期数据不能含0")])]),t._v(" "),n("tr",[n("td",[t._v("NO_ENGINE_SUBSTITUTION")]),t._v(" "),n("td",[t._v("当指定的存储引擎不可用时报错。")])])])]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("mysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show variables like "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sql_model'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" session "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sql_mode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NO_ENGINE_SUBSTITUTION, only_full_group_by'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" product_id, warehouse_id, sum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" as cnt from stock group by product_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nERROR "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1055")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("42000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": Expression "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2 of SELECT list is not in GROUP BY clause and contains nonaggregated column ' stock. stock. warehouse_id' which is not functionally dependent on colum ns in GROUP BY clause; this is incompatible with sql_mode-only_ful1_group_by ")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" product_id, warehouse_id, sum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" as cnt from stock group by product_id, warehouse_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"this is a string"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sql_mode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ansi_quotes, ONLY_FULL_GROUP_BY, NO_ENGINE_SUBSTITUTION"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"this is a string"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \nERROR "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1054")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("42S22"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": Unknown "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("column")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'this is a string'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'field list'")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'this is a string'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" create table t "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id real"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show create table t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("G \nTable：t \ncreate Table：CREATE TABLE t "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id double DEFAULT NULL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ENGINE-InnoDB DEFAULT "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CHARSET")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" session "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sql_mode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'real_as_float'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" drop table t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" create table；t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id real"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show create table t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("G\nTable：t \ncreate Table：CREATE TABLE t "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id float DEFAULT NULL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("ENGINE-InnoDB DEFAULT "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CHARSET")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8\n\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mooc.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" row "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" set, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" warnings\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show warnings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nTruncated incorrect DOUBLE value: "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),t._v("\nTruncated incorrect DOUBLE value: "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'imooc.com'")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" concat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'imooc.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhello imooc.com\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" session "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sql_mode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pipes_as_concat'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mooc.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nhello imooc.com\n\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" create table t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id int"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" default null"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" insert into t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ansi'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" row affected, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" warning\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show warnings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nIncorrect integer value: "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ansi'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("column")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),t._v(" at row "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" * from t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("G\nid: "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sql_mode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'strict_trans_tables'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" insert into t2 values"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ansi'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nERROR "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1366")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HY000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": Incorrect integer value: "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ansi'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("column")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),t._v(" at row "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sql_mode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' strict_trans_tables,error_for_division_by_zero'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" rows affected, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" warning\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("G\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/0: NULL\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" row "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" sect, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" warning\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show warnings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nDivision by "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sql_mode")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ansi'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("G\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/0: NULL\n")])])])])])])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("比较系统运行配置和配置文件中的配置")]),t._v(" "),n("p",[t._v("知识点")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("使用set命令配置动态参数")]),t._v(" "),n("p",[t._v("set [session | @@session.] system_var_name = expr")]),t._v(" "),n("p",[t._v("set [global | @@global.] system_var_name = expr")]),t._v(" "),n("p",[t._v("set [persist | @@persist.] system_var_name= expr")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("mysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show variables like "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wait_timeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("28800")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" global "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("wait_timeout")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show variables like "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wait_timeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("28800")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show global variables like "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wait_timeout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show variables like "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'max_connections%'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4000")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" persist "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("max_connections")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" show variables like "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'max_connections%'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" /home/mysql/data/\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". mysqld-auto.cnf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" mysqld-auto.cnf\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"version"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysql_server"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max_connections"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1000"')]),t._v(" , "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Metadata"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Timestamp"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1535290066405068")]),t._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v(" , "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Host"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1ocalhost"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("使用pt-config-diff工具比较配置文件")]),t._v(" "),n("p",[t._v("pt-config-diff u=root,p=,h=localhost /etc/my. cnf")]),t._v(" "),n("p",[n("img",{attrs:{src:a(756),alt:"image-20201205155913329"}})])]),t._v(" "),n("li",[n("p",[t._v("举几个MySQL中的关键性能参数")]),t._v(" "),n("p",[t._v("知识点")]),t._v(" "),n("p",[t._v("常用的性能参数")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th"),t._v(" "),n("th",[t._v("参数")]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("服务器配置参数")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("max_connections")]),t._v(" "),n("td",[t._v("设置MySQL允许访问的最大连接数量")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("interactive_timeout")]),t._v(" "),n("td",[t._v("设置交互连接的timeout时间")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("wait_timeout")]),t._v(" "),n("td",[t._v("设置非交互连接的timeout时间")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("max_allowed_packet")]),t._v(" "),n("td",[t._v("控制MySQL可以接收的数据包的大小")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("sync_binlog")]),t._v(" "),n("td",[t._v("表示每写多少次缓冲会向磁盘同步一次binlog")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("sort _buffer_size")]),t._v(" "),n("td",[t._v("设置每个会话使用的排序缓存区的大小")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("join_buffer_size")]),t._v(" "),n("td",[t._v("设置每个会话所使用的连接缓冲的大小")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("read_buffer_size")]),t._v(" "),n("td",[t._v("指定了当对一个MYISAM进行表扫描时所分配的读缓存池的大小")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("read_rnd_buffer_size")]),t._v(" "),n("td",[t._v("设置控制索引缓冲区的大小")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("binlog_cache_size")]),t._v(" "),n("td",[t._v("设置每个会话用于缓存未提交的事务缓存大小")])]),t._v(" "),n("tr",[n("td",[t._v("存储引擎参数")]),t._v(" "),n("td"),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("innodb flush_log_at_trx_commit")]),t._v(" "),n("td",[t._v("0：每秒进行一次重做日志的磁盘刷新操作。"),n("br"),t._v("1：每次事务提交都会刷新事务日志到磁盘中。"),n("br"),t._v("2：每次事务提交写入系统缓存每秒向磁盘刷新一次")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("innodb_buffer_pool_size")]),t._v(" "),n("td",[t._v("设置Innodb缓冲池的大小，应为系统可用内存的75%。")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("innodb_buffer_pool_instances")]),t._v(" "),n("td",[t._v("Innodb缓冲池的实例个数，每个实例的大小为总缓冲池大小/实例个数。")])]),t._v(" "),n("tr",[n("td"),t._v(" "),n("td",[t._v("innodb_file_per_table")]),t._v(" "),n("td",[t._v("设置每个表独立使用一个表空间文件")])])])])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);